# ğŸš€ å®å¡”é¢æ¿å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æœåŠ¡å™¨è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: CentOS 7+, Ubuntu 18+, Debian 9+
- **å†…å­˜**: è‡³å°‘ 2GB RAM
- **ç£ç›˜**: è‡³å°‘ 20GB å¯ç”¨ç©ºé—´
- **å®å¡”é¢æ¿**: 7.0+ ç‰ˆæœ¬

### 2. ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
å°†ä»¥ä¸‹æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ `/root` ç›®å½•ï¼š
- `bt_import_database.sql` (æ•°æ®åº“å¯¼å…¥æ–‡ä»¶)
- `application-bt.properties` (åº”ç”¨é…ç½®æ–‡ä»¶)
- `bt_nginx.conf` (Nginxé…ç½®æ¨¡æ¿)
- `bt_deploy.sh` (è‡ªåŠ¨éƒ¨ç½²è„šæœ¬)
- `your-app.jar` (ä½ çš„Spring Bootåº”ç”¨JARåŒ…)

## ğŸ”§ ç¬¬ä¸€æ­¥ï¼šå®‰è£…å¿…è¦è½¯ä»¶

### 1.1 ç™»å½•å®å¡”é¢æ¿
è®¿é—® `http://ä½ çš„æœåŠ¡å™¨IP:8888` ç™»å½•å®å¡”é¢æ¿

### 1.2 å®‰è£…è½¯ä»¶
åœ¨ **è½¯ä»¶å•†åº—** ä¸­å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š
- âœ… **MySQL 8.0** (æˆ– 5.7)
- âœ… **Nginx 1.20**
- âœ… **Javaé¡¹ç›®ä¸€é”®éƒ¨ç½²**
- âœ… **phpMyAdmin** (æ•°æ®åº“ç®¡ç†)
- â­• **Redis** (å¯é€‰ï¼Œç”¨äºç¼“å­˜)

### 1.3 é…ç½®MySQL
1. ç‚¹å‡» **MySQL** â†’ **è®¾ç½®** â†’ **é…ç½®ä¿®æ”¹**
2. åœ¨é…ç½®æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
```ini
[mysqld]
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
default-time-zone = '+08:00'
max_connections = 200
```
3. ç‚¹å‡» **ä¿å­˜** â†’ **é‡å¯**

## ğŸ“Š ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®åº“

### 2.1 åˆ›å»ºæ•°æ®åº“
1. ç‚¹å‡» **æ•°æ®åº“** â†’ **æ·»åŠ æ•°æ®åº“**
2. å¡«å†™ä¿¡æ¯ï¼š
   - **æ•°æ®åº“å**: `rent_house`
   - **ç”¨æˆ·å**: `rent_house`
   - **å¯†ç **: `Qwesdx1245@`
   - **è®¿é—®æƒé™**: `æœ¬åœ°æœåŠ¡å™¨`
3. ç‚¹å‡» **æäº¤**

### 2.2 å¯¼å…¥æ•°æ®åº“ç»“æ„
1. ç‚¹å‡»æ•°æ®åº“åé¢çš„ **ç®¡ç†** æŒ‰é’®
2. è¿›å…¥phpMyAdmin
3. é€‰æ‹© `rent_house` æ•°æ®åº“
4. ç‚¹å‡» **å¯¼å…¥** æ ‡ç­¾
5. é€‰æ‹©æ–‡ä»¶ `bt_import_database.sql`
6. ç‚¹å‡» **æ‰§è¡Œ**

## ğŸŒ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºç½‘ç«™

### 3.1 æ·»åŠ ç«™ç‚¹
1. ç‚¹å‡» **ç½‘ç«™** â†’ **æ·»åŠ ç«™ç‚¹**
2. å¡«å†™ä¿¡æ¯ï¼š
   - **åŸŸå**: ä½ çš„åŸŸåæˆ–æœåŠ¡å™¨IP
   - **æ ¹ç›®å½•**: `/www/wwwroot/rent-house-management`
   - **PHPç‰ˆæœ¬**: `çº¯é™æ€`
3. ç‚¹å‡» **æäº¤**

## âš™ï¸ ç¬¬å››æ­¥ï¼šéƒ¨ç½²åº”ç”¨

### æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. SSHè¿æ¥åˆ°æœåŠ¡å™¨
2. æ‰§è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬ï¼š
```bash
cd /root
chmod +x bt_deploy.sh
./bt_deploy.sh
```
3. æŒ‰æç¤ºè¾“å…¥MySQLå¯†ç å’Œæ•°æ®åº“å¯†ç 

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

#### 4.1 ä¸Šä¼ JARåŒ…
1. ç‚¹å‡»ç½‘ç«™åé¢çš„ **æ–‡ä»¶** æŒ‰é’®
2. ä¸Šä¼ ä½ çš„Spring Boot JARåŒ…åˆ°ç½‘ç«™æ ¹ç›®å½•
3. é‡å‘½åä¸º `app.jar`

#### 4.2 é…ç½®åº”ç”¨
1. ä¸Šä¼  `application-bt.properties` åˆ°ç½‘ç«™æ ¹ç›®å½•
2. é‡å‘½åä¸º `application-production.properties`
3. ç¼–è¾‘æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“å¯†ç ï¼š
```properties
spring.datasource.password=ä½ çš„æ•°æ®åº“å¯†ç 
```

#### 4.3 åˆ›å»ºå¯åŠ¨è„šæœ¬
åœ¨ç½‘ç«™æ ¹ç›®å½•åˆ›å»º `start.sh`ï¼š
```bash
#!/bin/bash
cd /www/wwwroot/rent-house-management
nohup java -Xms512m -Xmx1024m -Dspring.profiles.active=production -jar app.jar > logs/app.log 2>&1 &
echo $! > app.pid
```

ç»™è„šæœ¬æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x start.sh
```

## ğŸ”„ ç¬¬äº”æ­¥ï¼šé…ç½®Nginxåå‘ä»£ç†

### 5.1 ä¿®æ”¹ç½‘ç«™é…ç½®
1. ç‚¹å‡»ç½‘ç«™åé¢çš„ **è®¾ç½®** æŒ‰é’®
2. ç‚¹å‡» **é…ç½®æ–‡ä»¶** æ ‡ç­¾
3. å°† `bt_nginx.conf` çš„å†…å®¹å¤åˆ¶åˆ°é…ç½®æ–‡ä»¶ä¸­
4. ä¿®æ”¹ `server_name` ä¸ºä½ çš„åŸŸåæˆ–IP
5. ç‚¹å‡» **ä¿å­˜**

### 5.2 é‡è½½Nginx
ç‚¹å‡» **è½¯ä»¶å•†åº—** â†’ **Nginx** â†’ **é‡è½½é…ç½®**

## ğŸš€ ç¬¬å…­æ­¥ï¼šå¯åŠ¨åº”ç”¨

### 6.1 ä½¿ç”¨Javaé¡¹ç›®ä¸€é”®éƒ¨ç½²
1. ç‚¹å‡» **è½¯ä»¶å•†åº—** â†’ **å·²å®‰è£…** â†’ **Javaé¡¹ç›®ä¸€é”®éƒ¨ç½²**
2. ç‚¹å‡» **è®¾ç½®**
3. æ·»åŠ é¡¹ç›®ï¼š
   - **é¡¹ç›®åç§°**: `rent-house-management`
   - **é¡¹ç›®è·¯å¾„**: `/www/wwwroot/rent-house-management`
   - **JARåŒ…è·¯å¾„**: `/www/wwwroot/rent-house-management/app.jar`
   - **å¯åŠ¨ç«¯å£**: `8080`
   - **JVMå‚æ•°**: `-Xms512m -Xmx1024m -Dspring.profiles.active=production`
4. ç‚¹å‡» **å¯åŠ¨**

### 6.2 éªŒè¯éƒ¨ç½²
1. è®¿é—® `http://ä½ çš„åŸŸåæˆ–IP/actuator/health`
2. åº”è¯¥è¿”å› `{"status":"UP"}`
3. è®¿é—® `http://ä½ çš„åŸŸåæˆ–IP` æŸ¥çœ‹åº”ç”¨

## ğŸ”’ ç¬¬ä¸ƒæ­¥ï¼šå®‰å…¨é…ç½®

### 7.1 é…ç½®é˜²ç«å¢™
1. ç‚¹å‡» **å®‰å…¨** â†’ **é˜²ç«å¢™**
2. å¼€æ”¾ç«¯å£ï¼š
   - `80` (HTTP)
   - `443` (HTTPS)
   - `8080` (Spring Bootï¼Œä»…å†…ç½‘)

### 7.2 é…ç½®SSLè¯ä¹¦ï¼ˆæ¨èï¼‰
1. ç‚¹å‡»ç½‘ç«™ **è®¾ç½®** â†’ **SSL**
2. é€‰æ‹© **Let's Encrypt** ç”³è¯·å…è´¹è¯ä¹¦
3. å¼€å¯ **å¼ºåˆ¶HTTPS**

## ğŸ“Š ç¬¬å…«æ­¥ï¼šç›‘æ§å’Œç»´æŠ¤

### 8.1 è®¾ç½®å®šæ—¶å¤‡ä»½
1. ç‚¹å‡» **è®¡åˆ’ä»»åŠ¡** â†’ **æ·»åŠ ä»»åŠ¡**
2. ä»»åŠ¡ç±»å‹ï¼š**å¤‡ä»½æ•°æ®åº“**
3. æ‰§è¡Œå‘¨æœŸï¼š**æ¯å¤© 2:00**
4. å¤‡ä»½æ•°æ®åº“ï¼š`rent_house_management`

### 8.2 æŸ¥çœ‹æ—¥å¿—
- åº”ç”¨æ—¥å¿—ï¼š`/www/wwwroot/rent-house-management/logs/app.log`
- Nginxæ—¥å¿—ï¼šç½‘ç«™è®¾ç½® â†’ æ—¥å¿—

## ğŸ¯ åˆå§‹è´¦å·ä¿¡æ¯

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è´¦å·ç™»å½•ï¼š

| ç”¨æˆ·å | å¯†ç  | è§’è‰² |
|--------|------|------|
| `superadmin` | `123456` | è¶…çº§ç®¡ç†å‘˜ |
| `admin` | `123456` | ç®¡ç†å‘˜ |
| `finance` | `123456` | è´¢åŠ¡äººå‘˜ |
| `service` | `123456` | å®¢æœäººå‘˜ |

âš ï¸ **é‡è¦**ï¼šè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

### åº”ç”¨ç®¡ç†
```bash
# å¯åŠ¨åº”ç”¨
cd /www/wwwroot/rent-house-management && ./start.sh

# åœæ­¢åº”ç”¨
cd /www/wwwroot/rent-house-management && ./stop.sh

# é‡å¯åº”ç”¨
cd /www/wwwroot/rent-house-management && ./restart.sh

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f /www/wwwroot/rent-house-management/logs/app.log
```

### æ•°æ®åº“ç®¡ç†
```bash
# å¤‡ä»½æ•°æ®åº“
mysqldump -u rent_app -p rent_house_management > backup.sql

# æ¢å¤æ•°æ®åº“
mysql -u rent_app -p rent_house_management < backup.sql
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **åº”ç”¨å¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥Javaç‰ˆæœ¬ï¼š`java -version`
   - æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼š`tail -f /www/wwwroot/rent-house-management/logs/app.log`
   - æ£€æŸ¥ç«¯å£å ç”¨ï¼š`netstat -tlnp | grep 8080`

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥MySQLæœåŠ¡ï¼šå®å¡”é¢æ¿ â†’ è½¯ä»¶å•†åº— â†’ MySQL â†’ å¯åŠ¨
   - æ£€æŸ¥æ•°æ®åº“å¯†ç æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™

3. **ç½‘ç«™æ— æ³•è®¿é—®**
   - æ£€æŸ¥Nginxé…ç½®æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - æ£€æŸ¥åŸŸåè§£æ

### è·å–å¸®åŠ©
- æŸ¥çœ‹å®å¡”é¢æ¿æ—¥å¿—
- æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- è”ç³»æŠ€æœ¯æ”¯æŒ

---

**éƒ¨ç½²å®Œæˆï¼äº«å—ä½ çš„æˆ¿å±‹ç§Ÿèµç®¡ç†ç³»ç»Ÿå§ï¼** ğŸ‰
