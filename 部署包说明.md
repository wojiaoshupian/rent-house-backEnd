# 🚀 房屋租赁管理系统 - 部署包说明

## 📦 部署包内容

### 核心文件
- **`rent-house-management-1.0.0.jar`** - 主应用程序JAR包 (59MB)
- **`db/`** - 数据库相关文件目录

### 数据库文件
- **`db/bt_import_database.sql`** - 宝塔面板专用数据库导入文件
- **`db/application-bt.properties`** - 宝塔面板专用配置文件
- **`db/bt_nginx.conf`** - Nginx配置模板
- **`db/bt_deploy.sh`** - 宝塔面板自动部署脚本
- **`db/宝塔面板快速部署指南.md`** - 详细部署指南

### 通用部署文件
- **`db/deploy.sql`** - 通用数据库部署脚本
- **`db/01_create_database.sql`** - 数据库创建脚本
- **`db/02_create_tables.sql`** - 表结构创建脚本
- **`db/03_insert_initial_data.sql`** - 初始数据插入脚本
- **`db/04_create_indexes.sql`** - 索引创建脚本
- **`db/05_create_views.sql`** - 视图创建脚本
- **`db/06_create_procedures.sql`** - 存储过程创建脚本
- **`db/07_create_triggers.sql`** - 触发器创建脚本

## 🔧 系统要求

### 服务器环境
- **操作系统**: Linux (CentOS 7+, Ubuntu 18+, Debian 9+)
- **内存**: 至少 2GB RAM (推荐 4GB+)
- **磁盘**: 至少 10GB 可用空间
- **Java**: JDK 17+ 或 JDK 11+
- **数据库**: MySQL 5.7+ 或 MySQL 8.0+

### 网络要求
- **端口**: 8080 (应用端口)
- **端口**: 3306 (MySQL端口)
- **端口**: 80/443 (Web访问端口)

## 🚀 快速部署

### 方法一：宝塔面板部署（推荐）

1. **上传文件到服务器**
   ```bash
   # 上传以下文件到服务器 /root 目录
   - rent-house-management-1.0.0.jar
   - db/bt_import_database.sql
   - db/application-bt.properties
   - db/bt_nginx.conf
   - db/bt_deploy.sh
   ```

2. **执行自动部署**
   ```bash
   cd /root
   chmod +x bt_deploy.sh
   ./bt_deploy.sh
   ```

3. **按提示输入数据库密码**

4. **配置Nginx反向代理**（参考 `db/宝塔面板快速部署指南.md`）

### 方法二：手动部署

1. **创建数据库**
   ```bash
   mysql -u root -p < db/01_create_database.sql
   mysql -u root -p < db/02_create_tables.sql
   mysql -u root -p < db/03_insert_initial_data.sql
   # ... 其他SQL文件
   ```

2. **启动应用**
   ```bash
   java -jar rent-house-management-1.0.0.jar --spring.profiles.active=production
   ```

## 📊 应用信息

### 基本信息
- **应用名称**: 房屋租赁管理系统
- **版本**: 1.0.0
- **技术栈**: Spring Boot 3.2.0 + MySQL + JPA
- **默认端口**: 8080

### 功能模块
- ✅ 用户管理（注册、登录、权限控制）
- ✅ 楼宇管理（楼宇信息、费用设置）
- ✅ 房间管理（房间信息、出租状态）
- ✅ 水电表管理（读数记录、用量计算）
- ✅ 账单管理（自动生成、押金处理）
- ✅ API文档（Swagger UI）

### 初始账号
| 用户名 | 密码 | 角色 | 描述 |
|--------|------|------|------|
| `superadmin` | `123456` | 超级管理员 | 拥有所有权限 |
| `admin` | `123456` | 管理员 | 管理权限 |
| `finance` | `123456` | 财务人员 | 财务相关权限 |
| `service` | `123456` | 客服人员 | 客服相关权限 |

⚠️ **重要**：部署后请立即修改默认密码！

## 🔗 访问地址

部署完成后，可通过以下地址访问：

- **应用首页**: `http://你的域名或IP`
- **API文档**: `http://你的域名或IP/swagger-ui/index.html`
- **健康检查**: `http://你的域名或IP/actuator/health`

## 📝 配置说明

### 数据库配置
```properties
spring.datasource.url=jdbc:mysql://localhost:3306/rent_house
spring.datasource.username=rent_house
spring.datasource.password=Qwesdx1245@
```

### JVM参数建议
```bash
java -Xms512m -Xmx1024m -jar rent-house-management-1.0.0.jar
```

### 环境变量
```bash
export SPRING_PROFILES_ACTIVE=production
export SPRING_DATASOURCE_PASSWORD=Qwesdx1245@
export JWT_SECRET=rent-house-management-production-jwt-secret-key-2025
```

## 🔧 维护操作

### 启动应用
```bash
nohup java -jar rent-house-management-1.0.0.jar > app.log 2>&1 &
```

### 停止应用
```bash
ps aux | grep rent-house-management
kill -9 PID
```

### 查看日志
```bash
tail -f app.log
```

### 备份数据库
```bash
mysqldump -u rent_house -p rent_house > backup_$(date +%Y%m%d).sql
```

## 🐛 故障排除

### 常见问题

1. **端口被占用**
   ```bash
   lsof -i:8080
   kill -9 PID
   ```

2. **数据库连接失败**
   - 检查MySQL服务状态
   - 检查数据库用户权限
   - 检查防火墙设置

3. **内存不足**
   - 调整JVM参数
   - 增加服务器内存

### 日志位置
- **应用日志**: `app.log`
- **系统日志**: `/var/log/`

## 📞 技术支持

如遇到部署问题，请检查：
1. Java版本是否正确 (`java -version`)
2. 数据库服务是否启动
3. 端口是否被占用
4. 防火墙设置是否正确
5. 配置文件是否正确

---

**版本**: 1.0.0
**构建时间**: 2025-08-08 14:58
**数据库密码**: Qwesdx1245@
**JDK版本**: 17+
**Spring Boot版本**: 3.2.0
